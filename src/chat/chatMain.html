<div class="tab-content" ng-controller="chatMainCtrl">

  <navbar title="消息" no-back></navbar>
  <!-- page content -->
  <div class="page-content no-scroll">

    <div pull-to-refresh="refresh()" data-ptr-ready="refresh()">

      <ul class="list chat-list">
        <li class="list-item gap-10" ng-repeat="item in chats">
          <div f7route="'chatDetail.html'" f7route-query="item" class="item-content">
            <div class="item-before position-relative">
              <img src="" lazy-src="{{item.icon}}" class="item-media"/>
            </div>
            <div class="item-inner">
              <div class="inner-content">
                <div class="item-title">
                  {{item.title}}
                  <div class="float-right font-12">
                    {{item.messages[item.messages.length - 1].create_at | fromNow}}
                  </div>
                </div>
                <div class="item-subtitle text-ellipsis">
                  {{item.messages[item.messages.length - 1].content}}
                  <div ng-show="item.messages.length > 0" class="text-badge bg-danger">
                    {{item.messages.length < 99 ? item.messages.length : '99+'}}
                  </div>
                </div>
                <!-- subtitle end-->
              </div>
              <!-- inner-content end-->
            </div>
          </div>
        </li>
        <li class="list-empty" ng-hide="data.results.length > 0">
          暂无数据
        </li>
      </ul>
    </div>
  </div>

</div>
